---
- name: "Upgrade Packages"
  pacman:
    update_cache: yes
    upgrade: yes

- name: "Install Packages"
  pacman:
    name: "{{ item.name | default(item) }}"
    install_options: "{{ item.install_options | default(omit) }}"
    state: "{{ item.state | default('present') }}"
  loop: "{{ pacman_installed_packages }}"

- name: "Uninstall Packages"
  pacman:
    name: "{{ item.name | default(item) }}"
    install_options: "{{ item.install_options | default(omit) }}"
    state: "{{ item.state | default('absent') }}"
  loop: "{{ pacman_uninstalled_packages }}"
